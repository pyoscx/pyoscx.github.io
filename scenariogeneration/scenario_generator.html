<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>scenariogeneration.scenario_generator API documentation</title>
<meta name="description" content="scenariogeneration
https://github.com/pyoscx/scenariogeneration …">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>scenariogeneration.scenario_generator</code></h1>
</header>
<section id="section-intro">
<p>scenariogeneration
<a href="https://github.com/pyoscx/scenariogeneration">https://github.com/pyoscx/scenariogeneration</a></p>
<p>This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at <a href="https://mozilla.org/MPL/2.0/.">https://mozilla.org/MPL/2.0/.</a></p>
<p>Copyright (c) 2022 The scenariogeneration Authors.</p>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="scenariogeneration.scenario_generator.ScenarioGenerator"><code class="flex name class">
<span>class <span class="ident">ScenarioGenerator</span></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ScenarioGenerator:
    &#34;&#34;&#34;ScenarioTemplate is a class that should be inherited by a Scenario class
    in order to generate xodr and xosc files based on the submodules xodr and
    xosc.

    Two main uses, in your generation class define self.parameters as
    either as:
    - a dict of lists, where the lists are the values you want to sweep
    over, all permutations of these sets will be generated
    - a list of dicts, where the dicts are identical and each element in
    the list is one scenario

    Attributes
    ----------
    road_file : str
        name of the roadfile

    parameters : dict[list], list[dicts]
        parameter sets to be used

    naming : str
        two options &#34;numerical&#34; or &#34;parameter&#34;

    generate_all_roads : bool
        will only generate unique roads

    number_of_parallel_writings : int
        parallelize the writing of the xml files, default: 1

    basename : str
        basename of the scenariofiles, default: name of file

    encoding : str
        encoding of the outputs, default: utf-8

    excluded_permutations : list[dict]
        list of parameter dicts to exclude from generation

    expand_permutations : list[dict[list]]
        list of dicts where each dict has lists as values, all combinations
        of these lists will be expanded and combined with the other
        permutations
    &#34;&#34;&#34;

    def __init__(self):
        self.road_file = &#34;&#34;
        self.parameters = {}
        self.naming = &#34;numerical&#34;  # can be &#39;numerical&#39;, &#39;parameter&#39;
        self._it = 0
        self._generation_folder = &#34;&#34;

        self.generate_all_roads = True
        self._created_roads = {}
        self._name_separator = &#34;_&#34;
        self.number_of_parallel_writings = 1
        self._prettyprint = True
        self.basename = os.path.basename(
            sys.modules[self.__class__.__module__].__file__
        ).split(&#34;.&#34;)[0]
        self.encoding = &#34;utf-8&#34;
        self.all_permutations = None
        self.write_relative_road_path = None
        self.excluded_permutations = []
        self.expand_permutations = []

    def road(self, **kwargs) -&gt; Optional[OpenDrive]:
        &#34;&#34;&#34;Dummy method for generating an OpenDRIVE road.

        Should be overwritten by the user, and return a pyodrx.OpenDrive
        object

        Return
        ------
        Optional[OpenDrive]
            a road on xodr.OpenDrive format
        &#34;&#34;&#34;
        return None

    def scenario(self, **kwargs) -&gt; Optional[Scenario]:
        &#34;&#34;&#34;Dummy method for generating a OpenScenario file.

        Should be overwritten by the user, and return a pyoscx.Scenario
        object

        Return
        ------
        Optional[Scenario]
            a scenario on pyoscx format
        &#34;&#34;&#34;
        return None

    def _reset_name_counter(self):
        &#34;&#34;&#34;Method to reset the counter if numerical naming is used.&#34;&#34;&#34;
        self._it = 0

    def _create_folder_structure(self, generation_folder: str):
        &#34;&#34;&#34;Method to create a folder structure (if needed) to generate the
        scenarios and roads in.

        Parameters
        ----------
        generation_folder : str
            the path to a folder where the files should be generated
        &#34;&#34;&#34;
        xosc_folder = os.path.join(generation_folder, &#34;xosc&#34;)
        xodr_folder = os.path.join(generation_folder, &#34;xodr&#34;)

        if not os.path.exists(generation_folder):
            os.mkdir(generation_folder)
        if not os.path.exists(xosc_folder):
            os.mkdir(xosc_folder)
        if not os.path.exists(xodr_folder):
            os.mkdir(xodr_folder)

        self._generation_folder = generation_folder

    def print_permutations(
        self, override_parameters: Optional[Union[list, dict]] = None
    ):
        &#34;&#34;&#34;print_permutations will create a printout to view all permutations
        created.

        Parameters
        ----------
        override_parameters :Optional[list] | Optional[dict]
            overrides the self.parameters attribute
        &#34;&#34;&#34;
        if override_parameters:
            self.parameters = override_parameters
        self._handle_input_parameters()
        it = 0
        for p in self.all_permutations:
            print(&#34;Permutation: &#34; + str(it))
            printstr = &#34;&#34;
            for key, value in p.items():
                printstr += key + &#34;: &#34; + str(value) + &#34;, &#34;
            print(printstr)
            it += 1

    def _handle_input_parameters(self):
        &#34;&#34;&#34;_handle_input_parameters takes care of different types of parameters
        inputs, such as list of dicts or a dict of lists.&#34;&#34;&#34;

        def expand_dict_of_lists(d):
            keys = d.keys()
            values = d.values()
            return [
                dict(zip(keys, combo)) for combo in itertools.product(*values)
            ]

        def combine(base_dicts, variants):
            permutations = []
            for base in base_dicts:
                for variant in variants:
                    permutations.append({**base, **variant})
            return permutations

        if isinstance(self.parameters, dict):
            self._create_permutations()

        elif isinstance(self.parameters, list):
            self.all_permutations = self.parameters
            if self.expand_permutations:
                for d in self.expand_permutations:
                    expanded = expand_dict_of_lists(d)
                    self.all_permutations = combine(
                        self.all_permutations, expanded
                    )

        if self.excluded_permutations:
            self.all_permutations = [
                p
                for p in self.all_permutations
                if not any(
                    set(ex.keys()) == set(p.keys())
                    and all(p[k] == ex[k] for k in ex)
                    for ex in self.excluded_permutations
                )
            ]

    def _generate_road_and_scenario(
        self, permutation: dict
    ) -&gt; tuple[str, str, list[_GenerationStruct]]:
        &#34;&#34;&#34;_generate_road_and_scenario takes a permutation and generates the
        road/scenario (if specified)

        Parameters
        ----------
        permutation : dict
            the parameter dict of the wanted scenario

        Returns
        -------
        tuple[str,str]
            open_scenario_file, open_drive_file
        &#34;&#34;&#34;
        scenario_name = self._get_scenario_name(permutation)
        self.road_file = &#34;&#34;
        scenario_file = &#34;&#34;
        files_to_write = []
        road = self.road(**permutation)
        if road:
            new_unique_road = True
            if not self.generate_all_roads:
                for previous_road in self._created_roads:
                    if self._created_roads[previous_road] == road:
                        self.road_file = previous_road
                        new_unique_road = False

            if new_unique_road:
                self.road_file = os.path.abspath(
                    os.path.join(
                        self._generation_folder,
                        &#34;xodr&#34;,
                        scenario_name + &#34;.xodr&#34;,
                    )
                )
                if self.number_of_parallel_writings == 1:
                    road.write_xml(
                        self.road_file, prettyprint=self._prettyprint
                    )
                else:
                    files_to_write.append(
                        _GenerationStruct(
                            road.get_element(),
                            self.road_file,
                            self._prettyprint,
                            self.encoding,
                        )
                    )

                if self.write_relative_road_path:
                    self.road_file = self.road_file.replace(
                        os.path.abspath(self._generation_folder),
                        os.path.pardir,
                    )

                self._created_roads[self.road_file] = road

        sce = self.scenario(**permutation)
        if sce:
            scenario_file = os.path.join(
                self._generation_folder, &#34;xosc&#34;, scenario_name + &#34;.xosc&#34;
            )
            if self.number_of_parallel_writings == 1:
                sce.write_xml(scenario_file, prettyprint=self._prettyprint)
            else:
                files_to_write.append(
                    _GenerationStruct(
                        sce.get_element(),
                        scenario_file,
                        self._prettyprint,
                        self.encoding,
                    )
                )
        return scenario_file, self.road_file, files_to_write

    def _get_scenario_name(self, permutation: dict) -&gt; str:
        &#34;&#34;&#34;_get_scenario_name generates the name of the wanted file, based on
        the permutation.

        Parameters
        ----------
        permutation : dict
            a permutation to create name from
            (used for the parameter naming option)

        Returns
        -------
        str
            scenario_name
        &#34;&#34;&#34;
        name_prefix = &#34;&#34;

        if self.naming == &#34;numerical&#34;:
            name_prefix = str(self._it)
            self._it += 1
        elif self.naming in [&#34;parameter&#34;, &#34;parameter_no_lists&#34;]:
            for key, value in permutation.items():
                if (
                    isinstance(value, list)
                    and self.naming == &#34;parameter_no_lists&#34;
                ):
                    value_str = str(self._it)
                    self._it += 1
                else:
                    value_str = str(value).replace(&#34;\\&#34;, &#34;-&#34;).replace(&#34;/&#34;, &#34;-&#34;)
                name_prefix += (
                    self._name_separator
                    + key.replace(&#34;\\&#34;, &#34;-&#34;).replace(&#34;/&#34;, &#34;-&#34;)
                    + &#34;-&#34;
                    + value_str
                )

        else:
            raise NameError(
                &#39;Attribute naming, can only be &#34;numerical&#34; or &#34;parameter&#34;, not &#39;
                + self.naming
            )

        return self.basename + name_prefix

    def generate_single(
        self,
        generation_folder: str,
        order: Union[str, int] = &#34;first&#34;,
        override_parameters: Optional[Union[list, dict]] = None,
        write_relative_road_path: bool = True,
        name_separator: Optional[str] = None,
        prettyprint: bool = True,
    ):
        &#34;&#34;&#34;generate_single will generate only one scenario.

        Parameters
        ----------
        generation_folder : str
            the path to a folder where the files should be generated

        order : str | int
            if multiple permutations are defined, this enables the
            picking of different permutations
                int - the number of that permutation
                str - first: first permutation
                        middle: the permutation in the middle
                        random: a random permutation
            Default: &#39;first&#39;

        override_parameters : Optional[list] | Optional[dict]
            overrides the self.parameters attribute (optional)

        write_relative_road_path : bool
            if the generator will write the path to a generated xodr
            file relative to the xosc (true), or the absolute path
            to the xodr (false)
            Default: True

        name_separator : str
            for generation with multiple parameters, this will change
            the separator between the variables. Default: &#39;_&#39;

        prettyprint:bool
            determins if the prettify funciton should be used while
            writing to xml (will take longer time). Default: True
        &#34;&#34;&#34;
        self._prettyprint = prettyprint
        if name_separator:
            self._name_separator = name_separator
        self.write_relative_road_path = write_relative_road_path
        self._create_folder_structure(generation_folder)
        if override_parameters:
            self.parameters = override_parameters
        self._handle_input_parameters()

        if isinstance(order, str):
            if order == &#34;first&#34;:
                it = 0
            elif order == &#34;middle&#34;:
                it = int(np.floor(len(self.all_permutations) / 2))
            elif order == &#34;random&#34;:
                it = int(
                    np.floor(np.random.rand() * len(self.all_permutations))
                )
        else:
            it = order
            self._it = it
        self.number_of_parallel_writings = 1
        osc, odr, _ = self._generate_road_and_scenario(
            self.all_permutations[it]
        )
        self._reset_name_counter()
        return osc, odr

    def generate(
        self,
        generation_folder: str,
        override_parameters: Optional[Union[list, dict]] = None,
        write_relative_road_path: bool = True,
        name_separator: Optional[str] = None,
        prettyprint: bool = True,
    ):
        &#34;&#34;&#34;Generate uses the xosc.Scenario defined in the method scenario and
        the xodr.OpenDrive (optional) in the road method together with the
        parameters attribute to generate scenarios and roads for all
        permutations defined and save those files in the generation_folder.

        Parameters
        ----------
        generation_folder : str
            the path to a folder where the files should be generated

        override_parameters : Optional[list] | Optional[dict]
            overrides the self.parameters attribute (optional)

        write_relative_road_path : bool
            if the generator will write the path to a generated xodr
            file relative to the xosc (true), or the absolute path to
            the xodr (false). Default: True

        name_separator : str
            for generation with multiple parameters, this will change
            the separator between the variables. Default: &#39;_&#39;

        prettyprint : bool
            determins if the prettify funciton should be used while
            writing to xml (will take longer time). Default: True
        &#34;&#34;&#34;
        self._prettyprint = prettyprint
        if name_separator:
            self._name_separator = name_separator

        self.write_relative_road_path = write_relative_road_path
        scenario_files = []
        road_files = []
        self._create_folder_structure(generation_folder)
        if override_parameters:
            self.parameters = override_parameters
        self._handle_input_parameters()
        files_to_write = []
        for p in self.all_permutations:
            (
                scenario_file,
                road_file,
                writables,
            ) = self._generate_road_and_scenario(p)
            scenario_files.append(scenario_file)
            road_files.append(road_file)
            files_to_write.extend(writables)

        if self.number_of_parallel_writings != 1:
            with Pool(self.number_of_parallel_writings) as p:
                p.map(_write_xml_file, files_to_write)
        self._reset_name_counter()
        return scenario_files, road_files

    def _create_permutations(self):
        &#34;&#34;&#34;Generates all permutations of the defined parameters.&#34;&#34;&#34;
        parameterlist = []
        for key in self.parameters:
            parameterlist.append(self.parameters[key])

        available_permutations = list(itertools.product(*parameterlist))
        self.all_permutations = []
        keys = list(self.parameters.keys())
        for p in available_permutations:
            inputdict = {}
            for i in range(len(self.parameters)):
                inputdict[keys[i]] = p[i]
            self.all_permutations.append(inputdict)</code></pre>
</details>
<div class="desc"><p>ScenarioTemplate is a class that should be inherited by a Scenario class
in order to generate xodr and xosc files based on the submodules xodr and
xosc.</p>
<p>Two main uses, in your generation class define self.parameters as
either as:
- a dict of lists, where the lists are the values you want to sweep
over, all permutations of these sets will be generated
- a list of dicts, where the dicts are identical and each element in
the list is one scenario</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>road_file</code></strong> :&ensp;<code>str</code></dt>
<dd>name of the roadfile</dd>
<dt><strong><code>parameters</code></strong> :&ensp;<code>dict[list], list[dicts]</code></dt>
<dd>parameter sets to be used</dd>
<dt><strong><code>naming</code></strong> :&ensp;<code>str</code></dt>
<dd>two options "numerical" or "parameter"</dd>
<dt><strong><code>generate_all_roads</code></strong> :&ensp;<code>bool</code></dt>
<dd>will only generate unique roads</dd>
<dt><strong><code>number_of_parallel_writings</code></strong> :&ensp;<code>int</code></dt>
<dd>parallelize the writing of the xml files, default: 1</dd>
<dt><strong><code>basename</code></strong> :&ensp;<code>str</code></dt>
<dd>basename of the scenariofiles, default: name of file</dd>
<dt><strong><code>encoding</code></strong> :&ensp;<code>str</code></dt>
<dd>encoding of the outputs, default: utf-8</dd>
<dt><strong><code>excluded_permutations</code></strong> :&ensp;<code>list[dict]</code></dt>
<dd>list of parameter dicts to exclude from generation</dd>
<dt><strong><code>expand_permutations</code></strong> :&ensp;<code>list[dict[list]]</code></dt>
<dd>list of dicts where each dict has lists as values, all combinations
of these lists will be expanded and combined with the other
permutations</dd>
</dl></div>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="examples.generator.CCRb.Scenario" href="../examples/generator/CCRb.html#examples.generator.CCRb.Scenario">Scenario</a></li>
<li><a title="examples.generator.CCRm.Scenario" href="../examples/generator/CCRm.html#examples.generator.CCRm.Scenario">Scenario</a></li>
<li><a title="examples.generator.CCRs.Scenario" href="../examples/generator/CCRs.html#examples.generator.CCRs.Scenario">Scenario</a></li>
<li><a title="examples.generator.generate_from_main.Scenario" href="../examples/generator/generate_from_main.html#examples.generator.generate_from_main.Scenario">Scenario</a></li>
<li><a title="examples.generator.generate_with_expanded_permutations.Scenario" href="../examples/generator/generate_with_expanded_permutations.html#examples.generator.generate_with_expanded_permutations.Scenario">Scenario</a></li>
<li><a title="examples.generator.generate_with_fixed_parameter_sets.Scenario" href="../examples/generator/generate_with_fixed_parameter_sets.html#examples.generator.generate_with_fixed_parameter_sets.Scenario">Scenario</a></li>
<li><a title="examples.generator.generate_with_permutations.Scenario" href="../examples/generator/generate_with_permutations.html#examples.generator.generate_with_permutations.Scenario">Scenario</a></li>
<li><a title="examples.xodr.adjustable_planview.Scenario" href="../examples/xodr/adjustable_planview.html#examples.xodr.adjustable_planview.Scenario">Scenario</a></li>
<li><a title="examples.xodr.clothoid_generation.Scenario" href="../examples/xodr/clothoid_generation.html#examples.xodr.clothoid_generation.Scenario">Scenario</a></li>
<li><a title="examples.xodr.common_junction_creator.Scenario" href="../examples/xodr/common_junction_creator.html#examples.xodr.common_junction_creator.Scenario">Scenario</a></li>
<li><a title="examples.xodr.direct_junction_creator.Scenario" href="../examples/xodr/direct_junction_creator.html#examples.xodr.direct_junction_creator.Scenario">Scenario</a></li>
<li><a title="examples.xodr.full_junction.Scenario" href="../examples/xodr/full_junction.html#examples.xodr.full_junction.Scenario">Scenario</a></li>
<li><a title="examples.xodr.full_junction_with_LaneDef.Scenario" href="../examples/xodr/full_junction_with_LaneDef.html#examples.xodr.full_junction_with_LaneDef.Scenario">Scenario</a></li>
<li><a title="examples.xodr.highway_bridge_example.Scenario" href="../examples/xodr/highway_bridge_example.html#examples.xodr.highway_bridge_example.Scenario">Scenario</a></li>
<li><a title="examples.xodr.highway_example.Scenario" href="../examples/xodr/highway_example.html#examples.xodr.highway_example.Scenario">Scenario</a></li>
<li><a title="examples.xodr.highway_example_with_merge_and_split.Scenario" href="../examples/xodr/highway_example_with_merge_and_split.html#examples.xodr.highway_example_with_merge_and_split.Scenario">Scenario</a></li>
<li><a title="examples.xodr.highway_exit_with_lane_types.Scenario" href="../examples/xodr/highway_exit_with_lane_types.html#examples.xodr.highway_exit_with_lane_types.Scenario">Scenario</a></li>
<li><a title="examples.xodr.junction_trippel_twoway.Scenario" href="../examples/xodr/junction_trippel_twoway.html#examples.xodr.junction_trippel_twoway.Scenario">Scenario</a></li>
<li><a title="examples.xodr.junction_with_signals.Scenario" href="../examples/xodr/junction_with_signals.html#examples.xodr.junction_with_signals.Scenario">Scenario</a></li>
<li><a title="examples.xodr.junction_with_varying_lane_widths.Scenario" href="../examples/xodr/junction_with_varying_lane_widths.html#examples.xodr.junction_with_varying_lane_widths.Scenario">Scenario</a></li>
<li><a title="examples.xodr.lane_number_change_merge.Scenario" href="../examples/xodr/lane_number_change_merge.html#examples.xodr.lane_number_change_merge.Scenario">Scenario</a></li>
<li><a title="examples.xodr.manual_add_of_geometries.Scenario" href="../examples/xodr/manual_add_of_geometries.html#examples.xodr.manual_add_of_geometries.Scenario">Scenario</a></li>
<li><a title="examples.xodr.multiple_geometries_one_road.Scenario" href="../examples/xodr/multiple_geometries_one_road.html#examples.xodr.multiple_geometries_one_road.Scenario">Scenario</a></li>
<li><a title="examples.xodr.multiple_geometries_one_road_with_objects.Scenario" href="../examples/xodr/multiple_geometries_one_road_with_objects.html#examples.xodr.multiple_geometries_one_road_with_objects.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_link_unequal_number_of_lanes.Scenario" href="../examples/xodr/road_link_unequal_number_of_lanes.html#examples.xodr.road_link_unequal_number_of_lanes.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_merge.Scenario" href="../examples/xodr/road_merge.html#examples.xodr.road_merge.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_merge_w_lane_merge.Scenario" href="../examples/xodr/road_merge_w_lane_merge.html#examples.xodr.road_merge_w_lane_merge.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_split.Scenario" href="../examples/xodr/road_split.html#examples.xodr.road_split.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_split_w_lane_split.Scenario" href="../examples/xodr/road_split_w_lane_split.html#examples.xodr.road_split_w_lane_split.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_with_changing_lane_width.Scenario" href="../examples/xodr/road_with_changing_lane_width.html#examples.xodr.road_with_changing_lane_width.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_with_custom_lanes.Scenario" href="../examples/xodr/road_with_custom_lanes.html#examples.xodr.road_with_custom_lanes.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_with_custom_roadmarkers.Scenario" href="../examples/xodr/road_with_custom_roadmarkers.html#examples.xodr.road_with_custom_roadmarkers.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_with_lane_adjustment.Scenario" href="../examples/xodr/road_with_lane_adjustment.html#examples.xodr.road_with_lane_adjustment.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_with_multiple_lane_widths.Scenario" href="../examples/xodr/road_with_multiple_lane_widths.html#examples.xodr.road_with_multiple_lane_widths.Scenario">Scenario</a></li>
<li><a title="examples.xodr.road_with_speed_signs.Scenario" href="../examples/xodr/road_with_speed_signs.html#examples.xodr.road_with_speed_signs.Scenario">Scenario</a></li>
<li><a title="examples.xodr.simple_road_with_objects.Scenario" href="../examples/xodr/simple_road_with_objects.html#examples.xodr.simple_road_with_objects.Scenario">Scenario</a></li>
<li><a title="examples.xodr.super_elevation_automation_example.Scenario" href="../examples/xodr/super_elevation_automation_example.html#examples.xodr.super_elevation_automation_example.Scenario">Scenario</a></li>
<li><a title="examples.xodr.two_roads.Scenario" href="../examples/xodr/two_roads.html#examples.xodr.two_roads.Scenario">Scenario</a></li>
<li><a title="examples.xosc.Acceleration_condition.Scenario" href="../examples/xosc/Acceleration_condition.html#examples.xosc.Acceleration_condition.Scenario">Scenario</a></li>
<li><a title="examples.xosc.Speed_condition.Scenario" href="../examples/xosc/Speed_condition.html#examples.xosc.Speed_condition.Scenario">Scenario</a></li>
<li><a title="examples.xosc.Stop_on_offroad.Scenario" href="../examples/xosc/Stop_on_offroad.html#examples.xosc.Stop_on_offroad.Scenario">Scenario</a></li>
<li><a title="examples.xosc.angle_condition_trigger.Scenario" href="../examples/xosc/angle_condition_trigger.html#examples.xosc.angle_condition_trigger.Scenario">Scenario</a></li>
<li><a title="examples.xosc.clothoid_spline_shape_trajectory.Scenario" href="../examples/xosc/clothoid_spline_shape_trajectory.html#examples.xosc.clothoid_spline_shape_trajectory.Scenario">Scenario</a></li>
<li><a title="examples.xosc.end_of_road_reset_traffic.Scenario" href="../examples/xosc/end_of_road_reset_traffic.html#examples.xosc.end_of_road_reset_traffic.Scenario">Scenario</a></li>
<li><a title="examples.xosc.multi_conditional_and_triggers.Scenario" href="../examples/xosc/multi_conditional_and_triggers.html#examples.xosc.multi_conditional_and_triggers.Scenario">Scenario</a></li>
<li><a title="examples.xosc.multi_conditional_different_actions.Scenario" href="../examples/xosc/multi_conditional_different_actions.html#examples.xosc.multi_conditional_different_actions.Scenario">Scenario</a></li>
<li><a title="examples.xosc.multi_conditional_or_triggers.Scenario" href="../examples/xosc/multi_conditional_or_triggers.html#examples.xosc.multi_conditional_or_triggers.Scenario">Scenario</a></li>
<li><a title="examples.xosc.multiple_maneuvers.Scenario" href="../examples/xosc/multiple_maneuvers.html#examples.xosc.multiple_maneuvers.Scenario">Scenario</a></li>
<li><a title="examples.xosc.one_action_example.Scenario" href="../examples/xosc/one_action_example.html#examples.xosc.one_action_example.Scenario">Scenario</a></li>
<li><a title="examples.xosc.parallel_distance_actions.Scenario" href="../examples/xosc/parallel_distance_actions.html#examples.xosc.parallel_distance_actions.Scenario">Scenario</a></li>
<li><a title="examples.xosc.route_in_crossing.Scenario" href="../examples/xosc/route_in_crossing.html#examples.xosc.route_in_crossing.Scenario">Scenario</a></li>
<li><a title="examples.xosc.speed_profile.Scenario" href="../examples/xosc/speed_profile.html#examples.xosc.speed_profile.Scenario">Scenario</a></li>
<li><a title="examples.xosc.syncronize_straight_example.Scenario" href="../examples/xosc/syncronize_straight_example.html#examples.xosc.syncronize_straight_example.Scenario">Scenario</a></li>
<li><a title="examples.xosc.trailer_example.Scenario" href="../examples/xosc/trailer_example.html#examples.xosc.trailer_example.Scenario">Scenario</a></li>
<li><a title="examples.xosc.trajectory_example.Scenario" href="../examples/xosc/trajectory_example.html#examples.xosc.trajectory_example.Scenario">Scenario</a></li>
<li><a title="examples.xosc.variable_usage.Scenario" href="../examples/xosc/variable_usage.html#examples.xosc.variable_usage.Scenario">Scenario</a></li>
<li><a title="examples.xosc.withcontroller.Scenario" href="../examples/xosc/withcontroller.html#examples.xosc.withcontroller.Scenario">Scenario</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="scenariogeneration.scenario_generator.ScenarioGenerator.generate"><code class="name flex">
<span>def <span class="ident">generate</span></span>(<span>self,<br>generation_folder: str,<br>override_parameters: list | dict | None = None,<br>write_relative_road_path: bool = True,<br>name_separator: str | None = None,<br>prettyprint: bool = True)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def generate(
    self,
    generation_folder: str,
    override_parameters: Optional[Union[list, dict]] = None,
    write_relative_road_path: bool = True,
    name_separator: Optional[str] = None,
    prettyprint: bool = True,
):
    &#34;&#34;&#34;Generate uses the xosc.Scenario defined in the method scenario and
    the xodr.OpenDrive (optional) in the road method together with the
    parameters attribute to generate scenarios and roads for all
    permutations defined and save those files in the generation_folder.

    Parameters
    ----------
    generation_folder : str
        the path to a folder where the files should be generated

    override_parameters : Optional[list] | Optional[dict]
        overrides the self.parameters attribute (optional)

    write_relative_road_path : bool
        if the generator will write the path to a generated xodr
        file relative to the xosc (true), or the absolute path to
        the xodr (false). Default: True

    name_separator : str
        for generation with multiple parameters, this will change
        the separator between the variables. Default: &#39;_&#39;

    prettyprint : bool
        determins if the prettify funciton should be used while
        writing to xml (will take longer time). Default: True
    &#34;&#34;&#34;
    self._prettyprint = prettyprint
    if name_separator:
        self._name_separator = name_separator

    self.write_relative_road_path = write_relative_road_path
    scenario_files = []
    road_files = []
    self._create_folder_structure(generation_folder)
    if override_parameters:
        self.parameters = override_parameters
    self._handle_input_parameters()
    files_to_write = []
    for p in self.all_permutations:
        (
            scenario_file,
            road_file,
            writables,
        ) = self._generate_road_and_scenario(p)
        scenario_files.append(scenario_file)
        road_files.append(road_file)
        files_to_write.extend(writables)

    if self.number_of_parallel_writings != 1:
        with Pool(self.number_of_parallel_writings) as p:
            p.map(_write_xml_file, files_to_write)
    self._reset_name_counter()
    return scenario_files, road_files</code></pre>
</details>
<div class="desc"><p>Generate uses the xosc.Scenario defined in the method scenario and
the xodr.OpenDrive (optional) in the road method together with the
parameters attribute to generate scenarios and roads for all
permutations defined and save those files in the generation_folder.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>generation_folder</code></strong> :&ensp;<code>str</code></dt>
<dd>the path to a folder where the files should be generated</dd>
<dt><strong><code>override_parameters</code></strong> :&ensp;<code>Optional[list] | Optional[dict]</code></dt>
<dd>overrides the self.parameters attribute (optional)</dd>
<dt><strong><code>write_relative_road_path</code></strong> :&ensp;<code>bool</code></dt>
<dd>if the generator will write the path to a generated xodr
file relative to the xosc (true), or the absolute path to
the xodr (false). Default: True</dd>
<dt><strong><code>name_separator</code></strong> :&ensp;<code>str</code></dt>
<dd>for generation with multiple parameters, this will change
the separator between the variables. Default: '_'</dd>
<dt><strong><code>prettyprint</code></strong> :&ensp;<code>bool</code></dt>
<dd>determins if the prettify funciton should be used while
writing to xml (will take longer time). Default: True</dd>
</dl></div>
</dd>
<dt id="scenariogeneration.scenario_generator.ScenarioGenerator.generate_single"><code class="name flex">
<span>def <span class="ident">generate_single</span></span>(<span>self,<br>generation_folder: str,<br>order: str | int = 'first',<br>override_parameters: list | dict | None = None,<br>write_relative_road_path: bool = True,<br>name_separator: str | None = None,<br>prettyprint: bool = True)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def generate_single(
    self,
    generation_folder: str,
    order: Union[str, int] = &#34;first&#34;,
    override_parameters: Optional[Union[list, dict]] = None,
    write_relative_road_path: bool = True,
    name_separator: Optional[str] = None,
    prettyprint: bool = True,
):
    &#34;&#34;&#34;generate_single will generate only one scenario.

    Parameters
    ----------
    generation_folder : str
        the path to a folder where the files should be generated

    order : str | int
        if multiple permutations are defined, this enables the
        picking of different permutations
            int - the number of that permutation
            str - first: first permutation
                    middle: the permutation in the middle
                    random: a random permutation
        Default: &#39;first&#39;

    override_parameters : Optional[list] | Optional[dict]
        overrides the self.parameters attribute (optional)

    write_relative_road_path : bool
        if the generator will write the path to a generated xodr
        file relative to the xosc (true), or the absolute path
        to the xodr (false)
        Default: True

    name_separator : str
        for generation with multiple parameters, this will change
        the separator between the variables. Default: &#39;_&#39;

    prettyprint:bool
        determins if the prettify funciton should be used while
        writing to xml (will take longer time). Default: True
    &#34;&#34;&#34;
    self._prettyprint = prettyprint
    if name_separator:
        self._name_separator = name_separator
    self.write_relative_road_path = write_relative_road_path
    self._create_folder_structure(generation_folder)
    if override_parameters:
        self.parameters = override_parameters
    self._handle_input_parameters()

    if isinstance(order, str):
        if order == &#34;first&#34;:
            it = 0
        elif order == &#34;middle&#34;:
            it = int(np.floor(len(self.all_permutations) / 2))
        elif order == &#34;random&#34;:
            it = int(
                np.floor(np.random.rand() * len(self.all_permutations))
            )
    else:
        it = order
        self._it = it
    self.number_of_parallel_writings = 1
    osc, odr, _ = self._generate_road_and_scenario(
        self.all_permutations[it]
    )
    self._reset_name_counter()
    return osc, odr</code></pre>
</details>
<div class="desc"><p>generate_single will generate only one scenario.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>generation_folder</code></strong> :&ensp;<code>str</code></dt>
<dd>the path to a folder where the files should be generated</dd>
<dt><strong><code>order</code></strong> :&ensp;<code>str | int</code></dt>
<dd>if multiple permutations are defined, this enables the
picking of different permutations
int - the number of that permutation
str - first: first permutation
middle: the permutation in the middle
random: a random permutation
Default: 'first'</dd>
<dt><strong><code>override_parameters</code></strong> :&ensp;<code>Optional[list] | Optional[dict]</code></dt>
<dd>overrides the self.parameters attribute (optional)</dd>
<dt><strong><code>write_relative_road_path</code></strong> :&ensp;<code>bool</code></dt>
<dd>if the generator will write the path to a generated xodr
file relative to the xosc (true), or the absolute path
to the xodr (false)
Default: True</dd>
<dt><strong><code>name_separator</code></strong> :&ensp;<code>str</code></dt>
<dd>for generation with multiple parameters, this will change
the separator between the variables. Default: '_'</dd>
</dl>
<p>prettyprint:bool
determins if the prettify funciton should be used while
writing to xml (will take longer time). Default: True</p></div>
</dd>
<dt id="scenariogeneration.scenario_generator.ScenarioGenerator.print_permutations"><code class="name flex">
<span>def <span class="ident">print_permutations</span></span>(<span>self, override_parameters: list | dict | None = None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_permutations(
    self, override_parameters: Optional[Union[list, dict]] = None
):
    &#34;&#34;&#34;print_permutations will create a printout to view all permutations
    created.

    Parameters
    ----------
    override_parameters :Optional[list] | Optional[dict]
        overrides the self.parameters attribute
    &#34;&#34;&#34;
    if override_parameters:
        self.parameters = override_parameters
    self._handle_input_parameters()
    it = 0
    for p in self.all_permutations:
        print(&#34;Permutation: &#34; + str(it))
        printstr = &#34;&#34;
        for key, value in p.items():
            printstr += key + &#34;: &#34; + str(value) + &#34;, &#34;
        print(printstr)
        it += 1</code></pre>
</details>
<div class="desc"><p>print_permutations will create a printout to view all permutations
created.</p>
<h2 id="parameters">Parameters</h2>
<p>override_parameters :Optional[list] | Optional[dict]
overrides the self.parameters attribute</p></div>
</dd>
<dt id="scenariogeneration.scenario_generator.ScenarioGenerator.road"><code class="name flex">
<span>def <span class="ident">road</span></span>(<span>self, **kwargs) ‑> <a title="scenariogeneration.xodr.opendrive.OpenDrive" href="xodr/opendrive.html#scenariogeneration.xodr.opendrive.OpenDrive">OpenDrive</a> | None</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def road(self, **kwargs) -&gt; Optional[OpenDrive]:
    &#34;&#34;&#34;Dummy method for generating an OpenDRIVE road.

    Should be overwritten by the user, and return a pyodrx.OpenDrive
    object

    Return
    ------
    Optional[OpenDrive]
        a road on xodr.OpenDrive format
    &#34;&#34;&#34;
    return None</code></pre>
</details>
<div class="desc"><p>Dummy method for generating an OpenDRIVE road.</p>
<p>Should be overwritten by the user, and return a pyodrx.OpenDrive
object</p>
<h2 id="return">Return</h2>
<p>Optional[OpenDrive]
a road on xodr.OpenDrive format</p></div>
</dd>
<dt id="scenariogeneration.scenario_generator.ScenarioGenerator.scenario"><code class="name flex">
<span>def <span class="ident">scenario</span></span>(<span>self, **kwargs) ‑> <a title="scenariogeneration.xosc.scenario.Scenario" href="xosc/scenario.html#scenariogeneration.xosc.scenario.Scenario">Scenario</a> | None</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def scenario(self, **kwargs) -&gt; Optional[Scenario]:
    &#34;&#34;&#34;Dummy method for generating a OpenScenario file.

    Should be overwritten by the user, and return a pyoscx.Scenario
    object

    Return
    ------
    Optional[Scenario]
        a scenario on pyoscx format
    &#34;&#34;&#34;
    return None</code></pre>
</details>
<div class="desc"><p>Dummy method for generating a OpenScenario file.</p>
<p>Should be overwritten by the user, and return a pyoscx.Scenario
object</p>
<h2 id="return">Return</h2>
<p>Optional[Scenario]
a scenario on pyoscx format</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="scenariogeneration" href="index.html">scenariogeneration</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="scenariogeneration.scenario_generator.ScenarioGenerator" href="#scenariogeneration.scenario_generator.ScenarioGenerator">ScenarioGenerator</a></code></h4>
<ul class="">
<li><code><a title="scenariogeneration.scenario_generator.ScenarioGenerator.generate" href="#scenariogeneration.scenario_generator.ScenarioGenerator.generate">generate</a></code></li>
<li><code><a title="scenariogeneration.scenario_generator.ScenarioGenerator.generate_single" href="#scenariogeneration.scenario_generator.ScenarioGenerator.generate_single">generate_single</a></code></li>
<li><code><a title="scenariogeneration.scenario_generator.ScenarioGenerator.print_permutations" href="#scenariogeneration.scenario_generator.ScenarioGenerator.print_permutations">print_permutations</a></code></li>
<li><code><a title="scenariogeneration.scenario_generator.ScenarioGenerator.road" href="#scenariogeneration.scenario_generator.ScenarioGenerator.road">road</a></code></li>
<li><code><a title="scenariogeneration.scenario_generator.ScenarioGenerator.scenario" href="#scenariogeneration.scenario_generator.ScenarioGenerator.scenario">scenario</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
